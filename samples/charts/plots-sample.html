<!doctype html>

<html>

<head>
	<title>Plot Sample</title>
	<script src="../../dist/Chart.min.js"></script>
	<script src="../utils.js"></script>
	<script src="http://www.dukelearntoprogram.com/course1/common/js/image/SimpleImage.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      
	
	
	<style>
	body {
		background-color: #000000;
		color: #ffffff;
		font-family: "Roboto", Helvetica, Arial, sans-serif;
		font-size: 16px;
		line-height: 1.5;
		padding-bottom: 1.5rem;
		padding-top: 0.1rem;
		padding-left: 4rem;
		padding-right: 4rem;
	}
	
	h1, h2, h3{
		font-weight: 300;
	}
	
	h2{
		color: #000000;
		font-size: 15px;
	}
	
	h6{
		margin-top: 2rem;
		margin-bottom: 2rem;
		padding-left: 4rem;
		padding-right: 4rem;
	}
	
	h4{
		font-weight: 300;
		padding-left: 4rem;
		padding-right: 4rem;
	}
	
	hr {
		border-top: 1px solid #000030;
		margin-top: 1rem;
	}	
	.align-center {
		text-align: center;
	}	
	.column {
	  float: left;
	  width: 30%;
	  padding: 1px;
	}
	
	h5 {
		margin-top: 2rem;
		padding-left: 4rem;
		padding-right: 4rem;
	}	
	.align-center {
		text-align: center;
	}	
	.column {
	  float: left;
	  width: 30%;
	  padding: 1px;
	}
	
	button.btn1{
		display:inline-block;
		padding:0.3em 1.2em;
		margin:0 0.1em 0.1em 0;
		border:0.16em solid rgba(255,22,22,1);
		border-radius:2em;
		box-sizing: border-box;
		text-decoration:none;
		font-family:'Roboto',sans-serif;
		font-weight:300;
		color:#FFFFFF;
		text-shadow: 0 0.04em 0.04em rgba(0,0,0,0.35);
		text-align:center;
		transition: all 0.2s;
		width: 100%;
	}
	
	button.btn1:hover{
		border-color: rgba(255,22,22,0);
		color:#FF1616;
	}
	@media all and (max-width:30em){
		button.btn1{
			display:block;
			margin:0.2em auto;
		}
	}
	
	select.ddselect{
		display:inline-block;
		padding:0.3em 1.2em;
		margin:0 0.1em 0.1em 0;
		border:0.16em solid rgba(255,22,22,1);
		border-radius:2em;
		box-sizing: border-box;
		text-decoration:none;
		font-family:'Roboto',sans-serif;
		font-weight:300;
		color:#FFFFFF;
		text-shadow: 0 0.04em 0.04em rgba(0,0,0,0.35);
		text-align:center;
		transition: all 0.2s;
		width: 100%;
	}
	
	p{
		text-align: center;
		margin-left: 0rem;
		clear: both;
	}
	
	.col1 {
		width: 30%;
		float: left;
		padding: 1px;
		margin-top: 50px;
	}
	
	.col2 {
		width: 50%;
		float: left;
		padding: 1px;
	}
	.col3 {
		width: 42%;
		float: left;
		padding: 2px;
		margin: 40px;
	}
	
	#canvas-holder1, #canvas-holder2, #canvas-holder3, #canvas-holder4 {
		height: 280px;
		width: 100%;
		padding-top: 2rem;
	}
	
	#canv{
		height: 300px;
		width: 615px;
		border-top: 0px solid #9a4ef1;
		border-left: 0px solid #9a4ef1;
		border-bottom: 0px solid #9a4ef1;
		border-right: 0px solid #9a4ef1;
		margin-top: 1.5rem;
		margin-left: 5.8rem;
	}
	
	canvas {
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}
	</style>
</head>

<body>

	<div class="row">
	
		<div class="col2">
			
			<img src="drivefileLOGOBIG.png" class="center_blog_post" alt="Blog Image 3" style = "width:400px;height:200px;">
						
		</div>
	
		<div class="col1">
		
			<h6>
				<button class = "btn1" id="randomizeData" style="background-color:#000000">Reset Data</button>
			</h6>				
			<h6>
				<select id="ddselect" onchange = "ddlselect();" style="background-color:#000000">
				<option> -- Select Beat -- </option>
				<option>01X</option>
				<option>02X</option>
				<option>02Y</option>
				<option>03X</option>
				<option>03Y</option>
				<option>04X</option>
				<option>05X</option>
				<option>05Y</option>
				<option>06X</option>
				<option>07X</option>
				<option>08X</option>
				<option>09X</option>
				<option>10X</option>
				<option>10Y</option>
				<option>11X</option>
				<option>12X</option>
				<option>12Y</option>
				<option>13X</option>
				<option>13Y</option>
				<option>13Z</option>
				<option>14X</option>
				<option>14Y</option>
				<option>15X</option>
				<option>16X</option>
				<option>16Y</option>
				<option>17X</option>
				<option>17Y</option>
				<option>18X</option>
				<option>18Y</option>
				<option>19X</option>
				<option>20X</option>
				<option>21X</option>
				<option>21Y</option>
				<option>22X</option>
				<option>22Y</option>
				<option>23X</option>
				<option>24X</option>
				<option>24Y</option>
				<option>25X</option>
				<option>25Y</option>
				<option>26X</option>
				<option>26Y</option>
				<option>27X</option>
				<option>27Y</option>
				<option>28X</option>
				<option>29X</option>
				<option>30X</option>
				<option>30Y</option>
				<option>31X</option>
				<option>31Y</option>
				<option>31Z</option>
				<option>32X</option>
				<option>32Y</option>
				<option>33X</option>
				<option>34X</option>
				<option>35X</option>
				<option>35Y</option>
				</select>
			</h6>
			<h6>
				<button class = "btn1" id="connectToSever" style="background-color:#000000">Plot Data</button>
			</h6>			
			
		</div>
		
	</div>
	
	<p></p>
	
	
		<div class="row">		
			<div class="col3">
				<div id="canvas-holder1" style="width:100%">
					<canvas id="bar-chart1"></canvas>				
				<!-- <h3 class="align-center">Plot1</h3> -->
				</div>
			</div>
			
			<div class="col3">
				<div id="canvas-holder2" style="width:100%">
					<canvas id="bar-chart2"></canvas>
				<!-- <h3 class="align-center">Plot2</h3> -->
				</div>
			</div>
			
		</div>
	
	<style>
	  #map {
		height: 400px;
		width = 100%;
	  }
	</style>
	
	<div id="map"></div>
	<script>

	function initMap(){
	  var options = {
		zoom:11.5,
		center:{lat:37.79832501,lng:-122.27223049999999}
		}
		
	  var map = new google.maps.Map(document.getElementById('map'), options);
	  
	addMarker({lat:37.79832501,lng:-122.27223049999999},'<h2>01X<h2>')
	addMarker({lat:37.80552105,lng:-122.2866993},'<h2>02X<h2>')
	addMarker({lat:37.80641613,lng:-122.29726409999998},'<h2>02Y<h2>')
	addMarker({lat:37.80087857,lng:-122.27003700000002},'<h2>03X<h2>')
	addMarker({lat:37.80239275,lng:-122.2751274},'<h2>03Y<h2>')
	addMarker({lat:37.80840825,lng:-122.26995},'<h2>04X<h2>')
	addMarker({lat:37.81240269,lng:-122.28124869999999},'<h2>05X<h2>')
	addMarker({lat:37.81412061,lng:-122.2926258},'<h2>05Y<h2>')
	addMarker({lat:37.82096746,lng:-122.2716719},'<h2>06X<h2>')
	addMarker({lat:37.82055088,lng:-122.2795055},'<h2>07X<h2>')
	addMarker({lat:37.8172383,lng:-122.2638986},'<h2>08X<h2>')
	addMarker({lat:37.82547677,lng:-122.2531807},'<h2>09X<h2>')
	addMarker({lat:37.83955554,lng:-122.27670379999999},'<h2>10X<h2>')
	addMarker({lat:37.83635185,lng:-122.27142260000001},'<h2>10Y<h2>')
	addMarker({lat:37.84005008,lng:-122.2664679},'<h2>11X<h2>')
	addMarker({lat:37.8340065,lng:-122.2611625},'<h2>12X<h2>')
	addMarker({lat:37.84225574,lng:-122.25516299999998},'<h2>12Y<h2>')
	addMarker({lat:37.83787559,lng:-122.23329709999999},'<h2>13X<h2>')
	addMarker({lat:37.83883564,lng:-122.21824679999999},'<h2>13Y<h2>')
	addMarker({lat:37.82997354,lng:-122.21118670000001},'<h2>13Z<h2>')
	addMarker({lat:37.81026468,lng:-122.25526699999999},'<h2>14X<h2>')
	addMarker({lat:37.81264545,lng:-122.2478132},'<h2>14Y<h2>')
	addMarker({lat:37.79927758,lng:-122.2426245},'<h2>15X<h2>')
	addMarker({lat:37.80800391,lng:-122.2355787},'<h2>16X<h2>')
	addMarker({lat:37.80624813,lng:-122.22404540000001},'<h2>16Y<h2>')
	addMarker({lat:37.79435053,lng:-122.24480449999999},'<h2>17X<h2>')
	addMarker({lat:37.80050175,lng:-122.2383837},'<h2>17Y<h2>')
	addMarker({lat:37.79017043,lng:-122.23934720000001},'<h2>18X<h2>')
	addMarker({lat:37.79380935,lng:-122.23340120000002},'<h2>18Y<h2>')
	addMarker({lat:37.78856694,lng:-122.24496200000002},'<h2>19X<h2>')
	addMarker({lat:37.78211501,lng:-122.23086609999999},'<h2>20X<h2>')
	addMarker({lat:37.78828626,lng:-122.2284034},'<h2>21X<h2>')
	addMarker({lat:37.78922516,lng:-122.21871540000001},'<h2>21Y<h2>')
	addMarker({lat:37.80079622,lng:-122.2149525},'<h2>22X<h2>')
	addMarker({lat:37.79711318,lng:-122.2001851},'<h2>22Y<h2>')
	addMarker({lat:37.77566185,lng:-122.22019990000001},'<h2>23X<h2>')
	addMarker({lat:37.781513000000004,lng:-122.2136257},'<h2>24X<h2>')
	addMarker({lat:37.78711669,lng:-122.2053447},'<h2>24Y<h2>')
	addMarker({lat:37.78918815,lng:-122.19350449999999},'<h2>25X<h2>')
	addMarker({lat:37.7826749,lng:-122.1707925},'<h2>25Y<h2>')
	addMarker({lat:37.76608694,lng:-122.20922859999999},'<h2>26X<h2>')
	addMarker({lat:37.75977907,lng:-122.19532849999999},'<h2>26Y<h2>')
	addMarker({lat:37.772248600000005,lng:-122.20642360000001},'<h2>27X<h2>')
	addMarker({lat:37.76766083,lng:-122.198952},'<h2>27Y<h2>')
	addMarker({lat:37.7812169,lng:-122.194225},'<h2>28X<h2>')
	addMarker({lat:37.77254693,lng:-122.1848129},'<h2>29X<h2>')
	addMarker({lat:37.76208058,lng:-122.1811331},'<h2>30X<h2>')
	addMarker({lat:37.76593961,lng:-122.17239440000002},'<h2>30Y<h2>')
	addMarker({lat:37.74381557,lng:-122.1973687},'<h2>31X<h2>')
	addMarker({lat:37.73856102,lng:-122.19069440000001},'<h2>31Y<h2>')
	addMarker({lat:37.73403878,lng:-122.1806149},'<h2>31Z<h2>')
	addMarker({lat:37.74322411,lng:-122.1707048},'<h2>32X<h2>')
	addMarker({lat:37.745886299999995,lng:-122.15858459999998},'<h2>32Y<h2>')
	addMarker({lat:37.74923873,lng:-122.17836809999999},'<h2>33X<h2>')
	addMarker({lat:37.75142226,lng:-122.17126599999999},'<h2>34X<h2>')
	addMarker({lat:37.75595287,lng:-122.1626409},'<h2>35X<h2>')
	addMarker({lat:37.76029269,lng:-122.120139},'<h2>35Y<h2>')
	  
	  function addMarker(coords, content){
		var marker = new google.maps.Marker({
			position:coords,
			map:map
		});
		var infoWindow = new google.maps.InfoWindow({content:content});
		marker.addListener('mouseover',function(){
		infoWindow.open(map, marker);
			});
		marker.addListener('mouseout',function(){
		infoWindow.close(map, marker);
			});
			
		var circle = new google.maps.Circle({
		  map: map,
		  radius: 500,    // 10 miles in metres
		  fillColor: '#AA0000'
		});
		circle.bindTo('center', marker, 'position');
		}
	}
	</script>
	<script defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJ_gY3ejrKp7QrkTN2SF5QpYc630xGE_Q&callback=initMap">
	</script>
	
	
	<script>
		var displayText;
		function ddlselect(){
		
			var d = document.getElementById("ddselect");
			displayText = d.options[d.selectedIndex].text;
		}
	
		var randomScalingFactor = function() {
			return Math.round(Math.random() * 0.0);
		};		
		
		var color = Chart.helpers.color;
		var horizontalBarChartData1 = {
			labels: ['Black', 'White', 'Latinx', 'Asian', 'Others'],
			datasets: [{
				label: 'Vehicular Stop Rates',
				backgroundColor: color("#ff1616").alpha(1.0).rgbString(),
				borderColor: "#ff1616",
				borderWidth: 1,
				data: [
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor()
				]
			}, {
				label: 'Vehicular Arrest Rates',
				backgroundColor: color("#ffffff").alpha(1.0).rgbString(),
				borderColor: "#ffffff",
				data: [
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor()
				]
			}]

		};
		
		var horizontalBarChartData2 = {
			labels: ['Black', 'White', 'Latinx', 'Asian', 'Others'],
			datasets: [{
				label: 'Pedestrian Stop Rates',
				backgroundColor: color("#ff1616").alpha(1.0).rgbString(),
				borderColor: "#ff1616",
				borderWidth: 1,
				data: [
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor()
				]
			}, {
				label: 'Pedestrian Arrest Rates',
				backgroundColor: color("#ffffff").alpha(1.0).rgbString(),
				borderColor: "#ffffff",
				data: [
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor(),
					randomScalingFactor()
				]
			}]

		};
		
		const url = 'https://api.wheretheiss.at/v1/satellites/25544';
		
		window.onload = function() {
			window.myHorizontalBar1 = new Chart(document.getElementById('bar-chart1').getContext('2d'), {
				type: 'bar',
				data: horizontalBarChartData1,
				options: {
					scales:{
							yAxes: [{
								display: false //this will remove all the x-axis grid lines
							}]
						},
					// Elements options apply to all of the options unless overridden in a dataset
					// In this case, we are setting the border of each horizontal bar to be 2px wide
					elements: {
						rectangle: {
							borderWidth: 2,
						}
					},
					responsive: true,
					legend: {
						position: 'bottom',
					},
					title: {
						display: false,
						text: 'blank'
					}
				}
			});
			
			window.myHorizontalBar2 = new Chart(document.getElementById('bar-chart2').getContext('2d'), {
				type: 'bar',
				data: horizontalBarChartData2,
				options: {
					scales:{
							yAxes: [{
								display: false //this will remove all the x-axis grid lines
							}]
						},
					// Elements options apply to all of the options unless overridden in a dataset
					// In this case, we are setting the border of each horizontal bar to be 2px wide
					elements: {
						rectangle: {
							borderWidth: 2,
						}
					},
					responsive: true,
					legend: {
						position: 'bottom',
					},
					title: {
						display: false,
						text: 'blank'
					}
				}
			});
			
		};

		document.getElementById('randomizeData').addEventListener('click', function() {
			
			var zero = Math.random() < 0.2 ? true : false;
			horizontalBarChartData1.datasets.forEach(function(dataset) {
				dataset.data = dataset.data.map(function() {
					return zero ? 0.0 : randomScalingFactor();
				});

			});
			horizontalBarChartData2.datasets.forEach(function(dataset) {
				dataset.data = dataset.data.map(function() {
					return zero ? 0.0 : randomScalingFactor();
				});

			});
			
			window.myHorizontalBar1.update();
			window.myHorizontalBar2.update();
			
		});

		var colorNames = Object.keys(window.chartColors);
		
	/*	document.getElementById('connectToSever').addEventListener('click', function(){
		
			async function getISS(){
				const response = await fetch(url);
				const data = await response.json();	
				document.getElementById('lat').textContent = data.latitude;
				

			
			}
			getISS();

		
		
		}); */
		
		var BSV, WSV, HSV, ASV, OSV, BAV, WAV, HAV, AAV, OAV, BSP, WSP, HSP, ASP, OSP, BAP, WAP, HAP, AAP, OAP;
		$(document).ready(function(){
			$('#connectToSever').click(function(){
				$.ajax({
					url:"oakland_traffic_stop_data.csv",
					dataType:"text",
					success:function(data){
						var employee_data = data.split(/\r?\n|\r/);
						for(var count = 0; count < employee_data.length; count++){
							var cell_data = employee_data[count].split(",");
							for(var cell_count = 0; cell_count < cell_data.length; cell_count++){
								if (count != 0){
									console.log(displayText)
									if(cell_data[0] == displayText){
										console.log(cell_data[cell_count])
										BSV = cell_data[3];
										WSV = cell_data[4];
										HSV = cell_data[5];
										ASV = cell_data[6];
										OSV = cell_data[7];
										BAV = cell_data[8];
										WAV = cell_data[9];
										HAV = cell_data[10];
										AAV = cell_data[11];
										OAV = cell_data[12];
										BSP = cell_data[13];
										WSP = cell_data[14];
										HSP = cell_data[15];
										ASP = cell_data[16];
										OSP = cell_data[17];
										BAP = cell_data[18];
										WAP = cell_data[19];
										HAP = cell_data[20];
										AAP = cell_data[21];
										OAP = cell_data[22];
										delete horizontalBarChartData1;
										horizontalBarChartData1 = {
										labels: ['Black', 'White', 'Latinx', 'Asian', 'Others'],
										datasets: [{
											label: 'Vehicular Stop Rates',
											backgroundColor: color("#ff1616").alpha(1.0).rgbString(),
											borderColor: "#ff1616",
											borderWidth: 1,
											data: [
												BSV,
												WSV,
												HSV,
												ASV,
												OSV
											]
										}, {
											label: 'Vehicular Arrest Rates',
											backgroundColor: color("#ffffff").alpha(1.0).rgbString(),
											borderColor: "#ffffff",
											data: [
												BAV,
												WAV,
												HAV,
												AAV,
												OAV
											]
										}]

									};
									delete window.myHorizontalBar1;
									window.myHorizontalBar1 = new Chart(document.getElementById('bar-chart1').getContext('2d'), {
											type: 'bar',
											data: horizontalBarChartData1,
											options: {
												scales:{
														yAxes: [{
															display: true //this will remove all the x-axis grid lines
														}]
													},
												// Elements options apply to all of the options unless overridden in a dataset
												// In this case, we are setting the border of each horizontal bar to be 2px wide
												elements: {
													rectangle: {
														borderWidth: 2,
													}
												},
												responsive: true,
												legend: {
													position: 'bottom',
												},
												title: {
													display: false,
													text: 'blank'
												}
											}
										});
										delete horizontalBarChartData2;
										horizontalBarChartData2 = {
										labels: ['Black', 'White', 'Latinx', 'Asian', 'Others'],
										datasets: [{
											label: 'Pedestrian Stop Rates',
											backgroundColor: color("#ff1616").alpha(1.0).rgbString(),
											borderColor: "#ff1616",
											borderWidth: 1,
											data: [
												BSP,
												WSP,
												HSP,
												ASP,
												OSP
											]
										}, {
											label: 'Pedestrian Arrest Rates',
											backgroundColor: color("#ffffff").alpha(1.0).rgbString(),
											borderColor: "#ffffff",
											data: [
												BAP,
												WAP,
												HAP,
												AAP,
												OAP
											]
										}]

									};
									delete window.myHorizontalBar2;
									window.myHorizontalBar2 = new Chart(document.getElementById('bar-chart2').getContext('2d'), {
											type: 'bar',
											data: horizontalBarChartData2,
											options: {
												scales:{
														yAxes: [{
															display: true //this will remove all the x-axis grid lines
														}]
													},
												// Elements options apply to all of the options unless overridden in a dataset
												// In this case, we are setting the border of each horizontal bar to be 2px wide
												elements: {
													rectangle: {
														borderWidth: 2,
													}
												},
												responsive: true,
												legend: {
													position: 'bottom',
												},
												title: {
													display: false,
													text: 'blank'
												}
											}
										});
									}
								}
							}
						}
					}
				});
			});
		});

	</script>
</body>

</html>
